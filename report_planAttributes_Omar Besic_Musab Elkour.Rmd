---
title: "Analysis of planAttributes.csv"
author: "Omar Besic und Musab Elkour" 
date: "23 Mai 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
### Wer?
Das **Center for Medicare & Medicaid Services (CMS)** setzt sich für mehr Transparenz in der "Health Insurance Exchange" ein.

Während Informationen über Gesundheitspläne wie Leistungen, Zuzahlungen, Prämien und geografische Abdeckung auf Healthcare.gov öffentlich zugänglich sind, veröffentlicht CMS auch herunterladbare **Public Use Files (PUFs)**, damit Forscher und andere Interessengruppen leichter auf Austauschdaten zugreifen können.

### Was?
Die Börsen-PUFs beinhalten Informationen auf Plan- und Herausgeberebene für zertifizierte **Qualified Health Plans (QHPs)** und **Stand-Alone Dental Plans (SADPs)**, die Einzelpersonen und Kleinunternehmen über die Krankenversicherungsbörse angeboten werden.

### Vorgehensweise 
1) Aufgabenstellung analysiert 
2) Kaggle Account erstellt + Daten extrahiert 
3) Daten bereinigt + in R integriert 
4) Daten analysiert und Kennzahlen definiert für die Auswertung 
5) Einarbeitung in RMarkdown 

```{r,include=FALSE, echo=FALSE}
library(ggplot2)
library(readr)
library(dplyr) 
library(choroplethr)
library(extrafont)
library(extrafontdb)
library(RColorBrewer)
library(scales)
library(gridExtra)
library(choroplethrMaps)
library(knitr)
library(kableExtra)
```

### Der Dataset - ein kurzer Ueberblick
In diesem Bericht werden folgende Kennzahlen genauer analysiert:
**TEHBInnTier1FamilyMOOP** -> Spalte 159
**xy**


# MOOP Spalte Analyse mit Histogram
```{r, echo=FALSE}

# import data with help of the readr package and reads comma delimited files
planAttributes <- read.csv("PlanAttributes.csv", stringsAsFactors = FALSE)

x <- knitr::kable(planAttributes[5,158:160], "html")
column_spec(x, 1:2, width = "20em", bold = TRUE, italic = TRUE)

# Maximum Out of Pocket for Medical and Drug EHB Benefits (Total),
# In Network (Tier 1), Family
# The max out of pocket is the amount of money that the family would 
# have to pay before the insurance covers everything 100%
# Give me the TEHBInnTier1FamilyMOOP column just for a short glimpse
planAttributes <- planAttributes %>% select(TEHBInnTier1FamilyMOOP)

# replace all "," with " " in TEHBInnTier1FamilyMOOP
# as example: given = $12,600 BUT wanted = $12600
planAttributes$TEHBInnTier1FamilyMOOP<- gsub(',', '', planAttributes$TEHBInnTier1FamilyMOOP)

# replace all "\\$" with " " in TEHBInnTier1FamilyMOOP
# as example: given = $12600 BUT wanted = 12600
planAttributes$TEHBInnTier1FamilyMOOP<- gsub('\\$', '', planAttributes$TEHBInnTier1FamilyMOOP)

# assign (and convert to numeric) the maximum out of pocket column to planAttributes$moop
planAttributes$moop<- as.numeric(planAttributes$TEHBInnTier1FamilyMOOP)

# fill the blank cells with 0
planAttributes$moop[is.na(planAttributes$moop)] <- 0

# plot histogram of moop
ggplot(planAttributes, aes(x = planAttributes$moop)) + geom_histogram()


```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
